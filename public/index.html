<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Luz</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <section class="menu">
    <section class="horatemp">
        <div id="timeContainer">
            <!-- Exibir Hora -->
            <div id="currentTime">Carregando hora...</div>

            <!-- Exibir Temperatura -->
            <div id="temperatureDisplay">0¬∞C</div>
        </div>    
    </section>
    <div id="greetingContainer">
        <!-- Sauda√ß√£o e √çcone -->
        <div id="timeOfDay">Bom dia!</div>
        <div id="sunMoonIcon">‚òÄÔ∏è</div>
    </div>
        <div id="columns">
            <!-- Coluna 1: Informa√ß√µes -->
            <div id="infoColumn">
                <h2>Informa√ß√µes</h2>
                <div id="status">Pronto para ouvir...</div>
                <div id="spokenCommand">Voc√™ disse: </div>           
            </div>
            <button id="voiceControlButton"><img src="img/micicon.png" alt=""></button>
        </section>
        <main>
            <!-- Coluna 2: Imagens e Bot√µes de Ligar/Desligar -->
            <div id="controlColumn">
                <h2>Controle de Luz</h2>
                <img src="img/cozinhasala.jpeg" alt="Imagem Casa" id="casaImagem">
                <img src="img/quartobanheiro.jpeg" alt="Imagem Casa" id="casaImagem">
                <!-- Bot√µes para ligar/desligar LEDs -->
                <div id="powerButtons">
                    <button id="powerButtonQuarto">Ligar LED Quarto</button>
                    <button id="powerButtonSala">Ligar LED Sala</button>
                    <button id="powerButtonBanheiro">Ligar LED Banheiro</button>
                    <button id="powerButtonCozinha">Ligar LED Cozinha</button>
                </div>
            </div>
            <!-- Coluna 3: Controles de M√∫sica, Voz e Acalmar -->
            <div id="musicVoiceColumn">
                <h2>Controles</h2>
                <!-- Bot√£o para controlar a m√∫sica -->
                <button id="playPauseMusic">Tocar M√∫sica</button>
                <input type="range" id="volumeControl" value="50" max="100"> <!-- Controle de volume -->

                <!-- Bot√£o para acalmar -->
                <button id="acalmarButton">Acalmar</button>

                <!-- Bot√£o para ativar o controle por voz -->
                
            </div>
        </div>
    </main>

    <script src="controleLuz.js"></script>
    <script src="controleVoz.js"></script>
    <script src="controleMusica.js"></script>
    <script src="controleHoraTemperatura.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const acalmarButton = document.getElementById('acalmarButton');
            const statusDisplay = document.getElementById('status');

            // Envia a notifica√ß√£o quando o bot√£o "Acalmar" for clicado
            acalmarButton.addEventListener('click', function () {
                statusDisplay.textContent = 'Enviando notifica√ß√£o...';

                fetch('/send-notification', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        statusDisplay.textContent = 'Notifica√ß√£o enviada com sucesso!';
                    } else {
                        statusDisplay.textContent = 'Erro ao enviar notifica√ß√£o.';
                    }
                })
                .catch(error => {
                    console.error('Erro ao enviar notifica√ß√£o:', error);
                    statusDisplay.textContent = 'Erro ao enviar notifica√ß√£o.';
                });
            });

            // Fun√ß√£o para atualizar a hora, sauda√ß√£o e temperatura
            function updateTimeAndGreeting() {
                const now = new Date();
                const hours = now.getHours();
                const minutes = now.getMinutes();

                const timeString = `${hours < 10 ? '0' + hours : hours}:${minutes < 10 ? '0' + minutes : minutes}`;
                document.getElementById('currentTime').textContent = timeString;

                let greeting = '';
                let icon = '';

                // Determina a sauda√ß√£o e o √≠cone dependendo da hora do dia
                if (hours >= 6 && hours < 12) {
                    greeting = 'Bom dia!';
                    icon = '‚òÄÔ∏è'; // Sol
                } else if (hours >= 12 && hours < 18) {
                    greeting = 'Boa tarde!';
                    icon = '‚òÄÔ∏è'; // Sol
                } else {
                    greeting = 'Boa noite!';
                    icon = 'üåô'; // Lua
                }

                // Exibe a sauda√ß√£o e o √≠cone
                document.getElementById('timeOfDay').textContent = greeting;
                document.getElementById('sunMoonIcon').textContent = icon;
            }

            // Atualiza a hora a cada minuto
            setInterval(updateTimeAndGreeting, 60000);
            updateTimeAndGreeting(); // Chama a fun√ß√£o na primeira vez para j√° exibir a hora ao carregar

            // Aqui voc√™ pode adicionar o c√≥digo para buscar a temperatura do sensor (DHT22) e exibi-la
            // Vou deixar o valor inicial da temperatura como 22¬∞C, mas voc√™ deve integrar o sensor com o servidor
            document.getElementById('temperatureDisplay').textContent = '22¬∞C'; // Exemplo
        });
    </script>
</body>
</html>
